# 🚀 本地运行 Hugging Face - 快速入门

## ✅ 已完成
- [x] 安装 `huggingface_hub` 库

## 📝 下一步操作

### 步骤 1: 获取 Hugging Face Token

1. 访问 https://huggingface.co/settings/tokens
2. 点击 "New token" 按钮
3. 输入 Token 名称 (例如: "local-demo")
4. 选择权限: **Read** (读取权限即可)
5. 点击 "Generate token"
6. **复制生成的 token** (格式: `hf_xxxxxxxxxxxxx`)

### 步骤 2: 设置 Token (选择一种方法)

#### 方法 A: 使用 .env 文件 (推荐)

1. 复制 `.env.template` 文件并重命名为 `.env`
   ```powershell
   Copy-Item .env.template .env
   ```

2. 编辑 `.env` 文件,将 `your_token_here` 替换为您的实际 token:
   ```
   HF_TOKEN=hf_your_actual_token_here
   ```

3. 保存文件

#### 方法 B: 使用环境变量

在 PowerShell 中运行:
```powershell
$env:HF_TOKEN = "hf_your_actual_token_here"
```

**注意**: 这种方法只在当前 PowerShell 会话中有效

#### 方法 C: 直接在代码中设置 (不推荐)

编辑 `huggingface_local_demo.py`,找到这一行:
```python
HF_TOKEN = os.getenv('HF_TOKEN', None)
```

改为:
```python
HF_TOKEN = "hf_your_actual_token_here"
```

### 步骤 3: 运行演示程序

#### 运行所有示例:
```powershell
python huggingface_local_demo.py
```

#### 直接进入交互模式:
```powershell
python huggingface_local_demo.py --interactive
```

---

## 📖 程序功能

### 自动运行的示例:

1. **基础对话** - 测试基本的 AI 对话功能
2. **Lucky Vicky 生成器** - 将负面事件转换为正向思考
3. **翻译功能** - 英文翻译成繁体中文
4. **情感分析** - 分析文本的情感倾向

### 交互模式:

- 输入任何事件,自动生成 Lucky Vicky 风格的正向贴文
- 输入 `quit` 或 `exit` 退出

---

## 🔧 故障排除

### 问题 1: ModuleNotFoundError: No module named 'huggingface_hub'

**解决方案**:
```powershell
pip install huggingface_hub
```

### 问题 2: "未找到 Hugging Face Token"

**解决方案**:
- 检查 `.env` 文件是否存在且格式正确
- 或使用环境变量方法设置 Token
- 或直接在代码中设置 Token

### 问题 3: "Invalid token" 错误

**解决方案**:
- 确认 Token 是否正确复制 (包含 `hf_` 前缀)
- 检查 Token 是否有 "Read" 权限
- 尝试重新生成 Token

### 问题 4: 网络连接错误

**解决方案**:
- 检查网络连接
- 确认可以访问 https://huggingface.co
- 如果在公司网络,可能需要配置代理

### 问题 5: Rate limit exceeded (速率限制)

**解决方案**:
- 等待几分钟后重试
- 使用较小的模型 (1.5B 而不是 7B)
- 考虑升级到付费计划

---

## 💡 使用技巧

### 技巧 1: 修改模型

在代码中找到 `model="Qwen/Qwen2.5-7B-Instruct"`,可以改为:

- `Qwen/Qwen2.5-1.5B-Instruct` - 更快,适合测试
- `Qwen/Qwen2.5-72B-Instruct` - 更强,但较慢

### 技巧 2: 调整创意程度

修改 `temperature` 参数:
- `0.3` - 更确定、一致
- `0.7` - 平衡 (默认)
- `0.9` - 更有创意

### 技巧 3: 控制输出长度

修改 `max_tokens` 参数:
- `100` - 简短回复
- `300` - 中等长度
- `500` - 较长回复

---

## 📊 文件说明

| 文件 | 用途 |
|------|------|
| `huggingface_local_demo.py` | **本地运行版本** (推荐) |
| `huggingface_demo.py` | Colab/Jupyter 版本 |
| `notebook_cells.py` | Notebook Cell 代码 |
| `.env.template` | Token 配置模板 |
| `.env` | 实际的 Token 配置 (需自己创建) |

---

## 🎯 快速测试

如果您已经设置好 Token,运行以下命令快速测试:

```powershell
# 测试所有功能
python huggingface_local_demo.py

# 或直接进入交互模式
python huggingface_local_demo.py --interactive
```

---

## 📚 相关资源

- [Hugging Face Hub](https://huggingface.co/)
- [获取 Token](https://huggingface.co/settings/tokens)
- [API 文档](https://huggingface.co/docs/huggingface_hub)
- [Qwen 模型](https://huggingface.co/Qwen)

---

## ✅ 检查清单

- [ ] 已安装 `huggingface_hub`
- [ ] 已获取 Hugging Face Token
- [ ] 已设置 Token (使用上述任一方法)
- [ ] 已运行 `huggingface_local_demo.py`
- [ ] 成功看到示例输出

---

**准备好了吗? 开始运行吧!** 🚀

```powershell
python huggingface_local_demo.py
```
